{"code":"!function(t){var e={};function i(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,\"a\",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p=\"\",i(i.s=0)}([function(t,e){(void 0)([\"./simulation.js\"],(function(t,e){\"use strict\";var i,n;e&&e.id;return{setters:[function(t){i=t}],execute:function(){5,n=new Map([[i.State.healthy,\"gray\"],[i.State.ill,\"red\"],[i.State.carrier,\"yellow\"],[i.State.cured,\"green\"],[i.State.dead,\"black\"],[i.State.hospitalized,\"blue\"]]),new(function(){function t(){var t=this;this.started=!1,this.clearEventHandler=function(){t.clear()},this.runEventHandler=function(){t.runSimulation()},this.stepEventHandler=function(){t.stepSimulation()};var e=document.getElementById(\"canvas\"),n=e.getContext(\"2d\");n.lineCap=\"round\",n.lineJoin=\"round\",n.strokeStyle=\"black\",n.lineWidth=1,this.context=n,this.simulation=new i.Simulation(Math.round(e.width/5),Math.round(e.height/5)),this.createUserEvents(),this.setSimulationParams(),this.createChart(),this.draw()}return t.prototype.createUserEvents=function(){document.getElementById(\"model-clear\").addEventListener(\"click\",this.clearEventHandler),document.getElementById(\"model-run\").addEventListener(\"click\",this.runEventHandler),document.getElementById(\"model-step\").addEventListener(\"click\",this.stepEventHandler)},t.prototype.createChart=function(){},t.prototype.clear=function(){this.lockSimulationParams(!1),this.started=!1,this.simulation.reset(),this.draw()},t.prototype.runSimulation=function(){var t=this;this.stepSimulation(),this.simulation.isEligibleForContinue&&window.requestAnimationFrame((function(){return t.runSimulation()}))},t.prototype.stepSimulation=function(){this.started||(this.readSimulationParams(),this.lockSimulationParams(!0),this.started=!0),this.simulation.update(),this.draw()},t.prototype.draw=function(){this.drawWorld(),this.showStat()},t.prototype.drawWorld=function(){for(var t=this.context,e=0;e<this.simulation.height;++e)for(var i=0;i<this.simulation.width;++i)t.fillStyle=n.get(this.simulation.world[e][i]),t.fillRect(5*e,5*i,4,4)},t.prototype.showStat=function(){document.getElementById(\"step\").innerHTML=String(this.simulation.step),document.getElementById(\"total\").innerHTML=String(this.simulation.statistics.totalCount),document.getElementById(\"healthy\").innerHTML=String(this.simulation.statistics.healthyCount),document.getElementById(\"carriers\").innerHTML=String(this.simulation.statistics.carriesCount),document.getElementById(\"ill\").innerHTML=String(this.simulation.statistics.illCount),document.getElementById(\"dead\").innerHTML=String(this.simulation.statistics.deadCount),document.getElementById(\"cured\").innerHTML=String(this.simulation.statistics.curedCount)},t.prototype.setSimulationParams=function(){document.getElementById(\"incubation-length\").value=String(this.simulation.config.incubationLength),document.getElementById(\"disease-length\").value=String(this.simulation.config.diseaseLength),document.getElementById(\"mortality-prob\").value=String(this.simulation.config.mortalityProbability),document.getElementById(\"disease-prob\").value=String(this.simulation.config.diseaseProbabilities.get(i.State.healthy)),document.getElementById(\"cured-disease-prob\").value=String(this.simulation.config.diseaseProbabilities.get(i.State.cured)),document.getElementById(\"quarantine-start-time\").value=String(this.simulation.config.quarantineStart),document.getElementById(\"quarantine-factor\").value=String(this.simulation.config.quarantineFactor),document.getElementById(\"hospitals-capacity\").value=String(this.simulation.config.hospitalsCapacity),document.getElementById(\"hospital-factor\").value=String(this.simulation.config.hospitalFactor)},t.prototype.readSimulationParams=function(){this.simulation.config.incubationLength=+document.getElementById(\"incubation-length\").value,this.simulation.config.diseaseLength=+document.getElementById(\"disease-length\").value,this.simulation.config.mortalityProbability=+document.getElementById(\"mortality-prob\").value,this.simulation.config.diseaseProbabilities.set(i.State.healthy,+document.getElementById(\"disease-prob\").value),this.simulation.config.diseaseProbabilities.set(i.State.cured,+document.getElementById(\"cured-disease-prob\").value),this.simulation.config.quarantineStart=+document.getElementById(\"quarantine-start-time\").value,this.simulation.config.quarantineFactor=+document.getElementById(\"quarantine-factor\").value,this.simulation.config.hospitalsCapacity=+document.getElementById(\"hospitals-capacity\").value,this.simulation.config.hospitalFactor=+document.getElementById(\"hospital-factor\").value},t.prototype.lockSimulationParams=function(t){for(var e=0,i=[\"incubation-length\",\"disease-length\",\"mortality-prob\",\"disease-prob\",\"cured-disease-prob\",\"quarantine-start-time\",\"quarantine-factor\",\"hospitals-capacity\",\"hospital-factor\"];e<i.length;e++){var n=i[e];document.getElementById(n).disabled=t}},t}())}}}))}]);","extractedComments":[]}